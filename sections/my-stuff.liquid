{{ 'section-my-stuff.css' | asset_url | stylesheet_tag }}

{%- style -%}
  #MyStuff-{{ section.id }} {
    padding: {{ section.settings.section_padding_top }}px 0 {{ section.settings.section_padding_bottom }}px 0;
    background-color: {{ section.settings.background_color }};
  }

  #MyStuff-{{ section.id }} .my-stuff-container {
    max-width: 100%;
    margin: 0 auto;
    padding: 0 {{ section.settings.container_padding }}px;
  }

  #MyStuff-{{ section.id }} .my-stuff-title {
    font-size: {{ section.settings.title_font_size }}px;
    font-weight: {{ section.settings.title_font_weight }};
    color: {{ section.settings.title_color }};
    margin-bottom: {{ section.settings.title_margin_bottom }}px;
    text-align: {{ section.settings.title_alignment }};
  }

  #MyStuff-{{ section.id }} .my-stuff-rail {
    display: flex;
    overflow-x: auto;
    overflow-y: hidden;
    gap: {{ section.settings.item_gap }}px;
    padding: {{ section.settings.rail_padding }}px 0;
    scroll-behavior: smooth;
    -webkit-overflow-scrolling: touch;
  }

  #MyStuff-{{ section.id }} .my-stuff-rail::-webkit-scrollbar {
    height: 8px;
  }

  #MyStuff-{{ section.id }} .my-stuff-rail::-webkit-scrollbar-track {
    background: rgba(255,255,255,0.1);
    border-radius: 4px;
  }

  #MyStuff-{{ section.id }} .my-stuff-rail::-webkit-scrollbar-thumb {
    background: rgba(255,255,255,0.3);
    border-radius: 4px;
  }

  #MyStuff-{{ section.id }} .my-stuff-rail::-webkit-scrollbar-thumb:hover {
    background: rgba(255,255,255,0.5);
  }

  #MyStuff-{{ section.id }} .my-stuff-item {
    flex: 0 0 {{ section.settings.item_width }}px;
    position: relative;
    cursor: pointer;
    transition: transform 0.3s ease;
    border-radius: {{ section.settings.item_border_radius }}px;
    overflow: hidden;
  }

  #MyStuff-{{ section.id }} .my-stuff-item:hover {
    transform: scale(1.05);
  }

  #MyStuff-{{ section.id }} .my-stuff-item-image {
    width: 100%;
    aspect-ratio: 2/3;
    object-fit: cover;
    border-radius: {{ section.settings.item_border_radius }}px;
  }

  #MyStuff-{{ section.id }} .my-stuff-item-overlay {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    background: linear-gradient(transparent, rgba(0,0,0,0.8));
    color: white;
    padding: 1rem;
    transform: translateY(100%);
    transition: transform 0.3s ease;
  }

  #MyStuff-{{ section.id }} .my-stuff-item:hover .my-stuff-item-overlay {
    transform: translateY(0);
  }

  #MyStuff-{{ section.id }} .my-stuff-item-delete {
    position: absolute;
    top: 0.5rem;
    right: 0.5rem;
    width: 2rem;
    height: 2rem;
    background: rgba(220, 53, 69, 0.9);
    border: none;
    border-radius: 50%;
    color: white;
    font-size: 1rem;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    transform: scale(0.8);
    transition: all 0.3s ease;
    z-index: 10;
  }

  #MyStuff-{{ section.id }} .my-stuff-item:hover .my-stuff-item-delete {
    opacity: 1;
    transform: scale(1);
  }

  #MyStuff-{{ section.id }} .my-stuff-item-delete:hover {
    background: rgba(200, 35, 51, 1);
    transform: scale(1.1);
  }

  #MyStuff-{{ section.id }} .my-stuff-item-title {
    font-size: {{ section.settings.item_title_size }}px;
    font-weight: 600;
    margin-bottom: 0.25rem;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  #MyStuff-{{ section.id }} .my-stuff-item-meta {
    font-size: {{ section.settings.item_meta_size }}px;
    opacity: 0.8;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  #MyStuff-{{ section.id }} .my-stuff-empty {
    text-align: center;
    padding: 4rem 2rem;
    color: {{ section.settings.empty_text_color }};
  }

  #MyStuff-{{ section.id }} .my-stuff-empty-icon {
    font-size: 4rem;
    margin-bottom: 1rem;
    opacity: 0.5;
  }

  #MyStuff-{{ section.id }} .my-stuff-empty-title {
    font-size: 1.5rem;
    font-weight: 600;
    margin-bottom: 0.5rem;
  }

  #MyStuff-{{ section.id }} .my-stuff-empty-text {
    font-size: 1rem;
    opacity: 0.7;
    max-width: 400px;
    margin: 0 auto;
  }

  #MyStuff-{{ section.id }} .my-stuff-controls {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1rem;
  }

  #MyStuff-{{ section.id }} .my-stuff-count {
    font-size: 0.9rem;
    color: {{ section.settings.meta_text_color }};
    opacity: 0.8;
  }

  #MyStuff-{{ section.id }} .my-stuff-clear {
    background: #dc3545;
    color: white;
    border: none;
    padding: 0.5rem 1rem;
    border-radius: 4px;
    font-size: 0.85rem;
    cursor: pointer;
    transition: background 0.3s ease;
  }

  #MyStuff-{{ section.id }} .my-stuff-clear:hover {
    background: #c82333;
  }

  @media screen and (max-width: 768px) {
    #MyStuff-{{ section.id }} .my-stuff-item {
      flex: 0 0 {{ section.settings.mobile_item_width }}px;
    }

    #MyStuff-{{ section.id }} .my-stuff-title {
      font-size: {{ section.settings.title_font_size | times: 0.8 }}px;
    }

    #MyStuff-{{ section.id }} .my-stuff-container {
      padding: 0 {{ section.settings.container_padding | times: 0.5 }}px;
    }
  }
{%- endstyle -%}

<div
  id="MyStuff-{{ section.id }}"
  class="my-stuff-section{% if settings.animations_reveal_on_scroll %} scroll-trigger animate--fade-in{% endif %}"
>
  <div class="my-stuff-container">
    <div class="my-stuff-controls" id="my-stuff-controls-{{ section.id }}" style="display: none;">
      <div>
        <h2 class="my-stuff-title">{{ section.settings.section_title | default: "My Stuff" }}</h2>
        <div class="my-stuff-count" id="my-stuff-count-{{ section.id }}"></div>
      </div>
      {%- if section.settings.show_clear_button -%}
        <button class="my-stuff-clear" id="clear-my-stuff-{{ section.id }}">
          Clear All
        </button>
      {%- endif -%}
    </div>

    <div class="my-stuff-rail" id="my-stuff-rail-{{ section.id }}">
      <!-- Videos will be populated by JavaScript -->
    </div>

    <div class="my-stuff-empty" id="my-stuff-empty-{{ section.id }}">
      <div class="my-stuff-empty-icon">ðŸ“º</div>
      <div class="my-stuff-empty-title">{{ section.settings.empty_title | default: "Your collection is empty" }}</div>
      <div class="my-stuff-empty-text">{{ section.settings.empty_message | default: "Start adding videos to your collection by clicking the 'Add to My Stuff' button on videos you want to save." }}</div>
    </div>
  </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const myStuffRail = document.getElementById('my-stuff-rail-{{ section.id }}');
  const myStuffEmpty = document.getElementById('my-stuff-empty-{{ section.id }}');
  const myStuffControls = document.getElementById('my-stuff-controls-{{ section.id }}');
  const myStuffCount = document.getElementById('my-stuff-count-{{ section.id }}');
  const clearButton = document.getElementById('clear-my-stuff-{{ section.id }}');

  // Store current My Stuff data for comparison
  let currentMyStuff = [];

  // Load and display My Stuff
  function loadMyStuff(forceRefresh = false) {
    try {
      const myStuff = JSON.parse(localStorage.getItem('myStuff') || '[]');
      
      // Check if data has changed to avoid unnecessary DOM updates
      if (!forceRefresh && JSON.stringify(currentMyStuff) === JSON.stringify(myStuff)) {
        return; // No changes, skip update
      }
      
      currentMyStuff = [...myStuff]; // Store current state
      
      if (myStuff.length === 0) {
        myStuffEmpty.style.display = 'block';
        myStuffControls.style.display = 'none';
        myStuffRail.style.display = 'none';
        return;
      }

      myStuffEmpty.style.display = 'none';
      myStuffControls.style.display = 'flex';
      myStuffRail.style.display = 'flex';
      
      // Update count
      myStuffCount.textContent = `${myStuff.length} video${myStuff.length !== 1 ? 's' : ''}`;

      // Get existing items to preserve DOM where possible
      const existingItems = Array.from(myStuffRail.children);
      const existingVideoIds = existingItems.map(item => item.dataset.videoId);
      
      // Clear rail for fresh render (this ensures proper order)
      myStuffRail.innerHTML = '';

      // Add items to rail
      myStuff.forEach((video, index) => {
        // Try to reuse existing DOM element if video hasn't changed
        const existingIndex = existingVideoIds.indexOf(video.id);
        let item;
        
        if (existingIndex !== -1 && existingItems[existingIndex]) {
          // Reuse existing element
          item = existingItems[existingIndex];
        } else {
          // Create new element
          item = createMyStuffItem(video, index);
        }
        
        myStuffRail.appendChild(item);
      });

    } catch (error) {
      console.error('Error loading My Stuff:', error);
    }
  }

  // Create individual My Stuff item
  function createMyStuffItem(video, index) {
    const item = document.createElement('div');
    item.className = 'my-stuff-item';
    item.dataset.videoId = video.id;

    // Get image from media_group
    let imageSrc = '';
    if (video.media_group && video.media_group[0] && video.media_group[0].media_item) {
      const imageBase = video.media_group[0].media_item.find(item => item.key === 'image_base');
      if (imageBase && imageBase.src) {
        imageSrc = imageBase.src;
      }
    }

    // Fallback to placeholder if no image
    if (!imageSrc) {
      imageSrc = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjMwMCIgdmlld0JveD0iMCAwIDIwMCAzMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIyMDAiIGhlaWdodD0iMzAwIiBmaWxsPSIjMzMzIi8+Cjx0ZXh0IHg9IjEwMCIgeT0iMTUwIiBmaWxsPSIjNjY2IiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBkeT0iLjNlbSI+Tm8gSW1hZ2U8L3RleHQ+Cjwvc3ZnPg==';
    }

    const category = video.extensions?.category || 'Video';
    const duration = video.extensions?.duration ? formatDuration(video.extensions.duration) : '';

    item.innerHTML = `
      <img 
        src="${imageSrc}" 
        alt="${video.title || 'Video'}" 
        class="my-stuff-item-image"
        loading="lazy"
      >
      <button class="my-stuff-item-delete" data-video-id="${video.id}" title="Remove from My Stuff">
        Ã—
      </button>
      <div class="my-stuff-item-overlay">
        <div class="my-stuff-item-title">${video.title || 'Untitled'}</div>
        <div class="my-stuff-item-meta">${category}${duration ? ' â€¢ ' + duration : ''}</div>
      </div>
    `;

    // Add click event to play video (but not on delete button)
    item.addEventListener('click', function(e) {
      if (!e.target.classList.contains('my-stuff-item-delete')) {
        playMyStuffVideo(video);
      }
    });

    // Add delete button functionality
    const deleteButton = item.querySelector('.my-stuff-item-delete');
    deleteButton.addEventListener('click', function(e) {
      e.stopPropagation(); // Prevent triggering video play
      removeFromMyStuff(video.id, video.title);
    });

    return item;
  }

  // Format duration helper
  function formatDuration(seconds) {
    const mins = Math.floor(seconds / 60);
    const secs = seconds % 60;
    return `${mins}:${secs.toString().padStart(2, '0')}`;
  }

  // Play video from My Stuff - integrates with video banner player
  function playMyStuffVideo(video) {
    console.log('Playing video from My Stuff:', video);
    
    // Function to try accessing the player with retries
    function tryAccessPlayer(attempts = 0) {
      try {
        // Check if videojs is available
        if (typeof videojs === 'undefined') {
          console.warn('Video.js not loaded yet, retrying...', `attempt ${attempts + 1}/15`);
          if (attempts < 15) {
            setTimeout(() => tryAccessPlayer(attempts + 1), 300);
            return;
          } else {
            console.error('Video.js failed to load after multiple attempts');
            return;
          }
        }

        // Debug: Log what we're looking for
        console.log('Searching for video players...');
        
        // Find all video players on the page
        const allPlayers = [];
        
        // Method 1: Look for video banner sections
        const videoBanners = document.querySelectorAll('[id^="VideoBanner-"]');
        console.log('Found video banners:', videoBanners.length);
        videoBanners.forEach(banner => {
          console.log('Video banner found:', banner.id);
          const sectionId = banner.id.split('-')[1];
          const playerId = `video-player-${sectionId}`;
          const playerElement = document.getElementById(playerId);
          console.log(`Looking for player with ID: ${playerId}`, playerElement);
          if (playerElement) {
            allPlayers.push({ playerId, sectionId, banner });
            console.log('Added video banner player:', playerId);
          }
        });
        
        // Method 2: Look for any video elements with Video.js class
        const videoElements = document.querySelectorAll('video.video-js');
        console.log('Found video.js elements:', videoElements.length);
        videoElements.forEach(videoEl => {
          console.log('Video.js element found:', videoEl.id, videoEl);
          if (videoEl.id && !allPlayers.find(p => p.playerId === videoEl.id)) {
            allPlayers.push({ playerId: videoEl.id, sectionId: null, banner: null });
            console.log('Added video.js player:', videoEl.id);
          }
        });
        
        // Method 3: Look for any video elements with data-vjs-player
        const vidiElements = document.querySelectorAll('video[data-vjs-player]');
        console.log('Found data-vjs-player elements:', vidiElements.length);
        vidiElements.forEach(videoEl => {
          console.log('data-vjs-player element found:', videoEl.id, videoEl);
          if (videoEl.id && !allPlayers.find(p => p.playerId === videoEl.id)) {
            allPlayers.push({ playerId: videoEl.id, sectionId: null, banner: null });
            console.log('Added data-vjs-player:', videoEl.id);
          }
        });
        
        // Method 4: Look for any video elements at all
        const allVideoElements = document.querySelectorAll('video');
        console.log('Found all video elements:', allVideoElements.length);
        allVideoElements.forEach((videoEl, index) => {
          console.log(`Video element ${index}:`, videoEl.id, videoEl.className, videoEl);
          if (videoEl.id && !allPlayers.find(p => p.playerId === videoEl.id)) {
            // Check if it's a video.js player by looking for the videojs method
            try {
              if (typeof videojs !== 'undefined' && videojs.getPlayer && videojs.getPlayer(videoEl.id)) {
                allPlayers.push({ playerId: videoEl.id, sectionId: null, banner: null });
                console.log('Added generic video player:', videoEl.id);
              }
            } catch (e) {
              console.log('Not a video.js player:', videoEl.id);
            }
          }
        });
        
        console.log('Total players found:', allPlayers.length, allPlayers);
        
        if (allPlayers.length === 0) {
          console.warn('No video players found on page');
          
          // Last resort: try to find ANY element that might be a video player
          const possiblePlayers = document.querySelectorAll('[id*="player"], [id*="video"], [class*="video"]');
          console.log('Possible video players found:', possiblePlayers.length);
          possiblePlayers.forEach((el, index) => {
            console.log(`Possible player ${index}:`, el.id, el.className, el.tagName);
          });
          
          // Ultimate fallback: create a simple fullscreen video player
          console.log('Creating fallback video player...');
          createFallbackVideoPlayer(video);
          return;
        }
        
        // Use the first available player
        const { playerId, sectionId, banner } = allPlayers[0];
        
        try {
          const player = videojs(playerId);
          
          if (player && video.content && video.content.src) {
            console.log('Found video player, updating content...');
            
            // Stop current video if playing
            player.pause();
            
            // Update video source
            player.src({
              src: video.content.src,
              type: video.content.type || 'video/mp4'
            });
            
            // Update overlay content if we have section info
            if (sectionId) {
              const titleElement = document.getElementById(`title-${sectionId}`);
              const summaryElement = document.getElementById(`summary-${sectionId}`);
              const metadataElement = document.getElementById(`metadata-${sectionId}`);
              
              if (titleElement) {
                titleElement.textContent = video.title || 'Untitled';
              }
              
              if (summaryElement) {
                summaryElement.textContent = video.summary || '';
              }
              
              if (metadataElement) {
                const category = video.extensions?.category || 'Video';
                const duration = video.extensions?.duration ? formatDuration(video.extensions.duration) : '--:--';
                const provider = video.extensions?.provider || 'My Stuff';
                
                metadataElement.innerHTML = `
                  <span class="category">${category}</span>
                  <span class="duration">${duration}</span>
                  <span class="provider">${provider}</span>
                `;
              }
              
              // Scroll to video banner section if available
              if (banner) {
                banner.scrollIntoView({ 
                  behavior: 'smooth', 
                  block: 'center' 
                });
              }
            }
            
            // Wait for the video to be ready and then play in fullscreen
            player.ready(() => {
              // Enable controls and unmute
              player.muted(false);
              player.controls(true);
              
              // Wait a bit for scroll and loading
              setTimeout(() => {
                // Play the video and immediately go to fullscreen
                player.play().then(() => {
                  console.log('Video playing, going fullscreen...');
                  requestPlayerFullscreen(player);
                }).catch(err => {
                  console.log('Autoplay failed, trying fullscreen anyway:', err);
                  requestPlayerFullscreen(player);
                });
              }, banner ? 500 : 100); // Wait longer if we scrolled
            });
            
            console.log('Video loaded in player:', video.title);
          } else {
            console.warn('Player not ready or no video source available');
            if (attempts < 5) {
              setTimeout(() => tryAccessPlayer(attempts + 1), 500);
            }
          }
        } catch (playerError) {
          console.error('Error accessing player:', playerError);
          if (attempts < 5) {
            setTimeout(() => tryAccessPlayer(attempts + 1), 500);
          }
        }
        
      } catch (error) {
        console.error('Error in tryAccessPlayer:', error);
        if (attempts < 5) {
          setTimeout(() => tryAccessPlayer(attempts + 1), 500);
        }
      }
    }
    
    // Start trying to access the player
    tryAccessPlayer();
  }

  // Fallback video player when no video.js players are found
  function createFallbackVideoPlayer(video) {
    console.log('Creating fallback player for:', video.title);
    
    if (!video.content || !video.content.src) {
      console.error('No video source available');
      alert('Video source not available');
      return;
    }
    
    // Create a fullscreen video overlay
    const overlay = document.createElement('div');
    overlay.style.cssText = `
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: rgba(0, 0, 0, 0.95);
      z-index: 9999;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-direction: column;
    `;
    
    // Create video element
    const videoElement = document.createElement('video');
    videoElement.style.cssText = `
      max-width: 90vw;
      max-height: 80vh;
      width: auto;
      height: auto;
    `;
    videoElement.controls = true;
    videoElement.autoplay = true;
    videoElement.src = video.content.src;
    
    // Create video title
    const titleElement = document.createElement('div');
    titleElement.style.cssText = `
      color: white;
      font-size: 1.5rem;
      font-weight: bold;
      margin-bottom: 1rem;
      text-align: center;
      max-width: 90vw;
    `;
    titleElement.textContent = video.title || 'Video';
    
    // Create close button
    const closeButton = document.createElement('button');
    closeButton.style.cssText = `
      position: absolute;
      top: 20px;
      right: 20px;
      background: rgba(255, 255, 255, 0.2);
      border: none;
      color: white;
      font-size: 2rem;
      width: 50px;
      height: 50px;
      border-radius: 50%;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: background 0.3s ease;
    `;
    closeButton.innerHTML = 'Ã—';
    closeButton.title = 'Close';
    
    // Close button hover effect
    closeButton.addEventListener('mouseenter', () => {
      closeButton.style.background = 'rgba(255, 255, 255, 0.4)';
    });
    closeButton.addEventListener('mouseleave', () => {
      closeButton.style.background = 'rgba(255, 255, 255, 0.2)';
    });
    
    // Close functionality
    function closePlayer() {
      videoElement.pause();
      document.body.removeChild(overlay);
      document.removeEventListener('keydown', handleKeydown);
    }
    
    closeButton.addEventListener('click', closePlayer);
    
    // Close on Escape key
    function handleKeydown(e) {
      if (e.key === 'Escape') {
        closePlayer();
      }
    }
    document.addEventListener('keydown', handleKeydown);
    
    // Close when clicking outside video
    overlay.addEventListener('click', (e) => {
      if (e.target === overlay) {
        closePlayer();
      }
    });
    
    // Assemble the player
    overlay.appendChild(titleElement);
    overlay.appendChild(videoElement);
    overlay.appendChild(closeButton);
    
    // Add to page
    document.body.appendChild(overlay);
    
    // Try to play the video
    videoElement.play().catch(err => {
      console.log('Autoplay failed in fallback player:', err);
    });
    
    console.log('Fallback video player created and playing');
  }

  // Helper function to request fullscreen
  function requestPlayerFullscreen(player) {
    try {
      if (player.requestFullscreen) {
        player.requestFullscreen();
      } else if (player.el() && player.el().requestFullscreen) {
        player.el().requestFullscreen();
      } else if (player.el() && player.el().webkitRequestFullscreen) {
        player.el().webkitRequestFullscreen();
      } else if (player.el() && player.el().mozRequestFullScreen) {
        player.el().mozRequestFullScreen();
      } else if (player.el() && player.el().msRequestFullscreen) {
        player.el().msRequestFullscreen();
      } else {
        console.warn('Fullscreen not supported');
      }
    } catch (error) {
      console.error('Error requesting fullscreen:', error);
    }
  }
  


  // Remove video from My Stuff
  function removeFromMyStuff(videoId, videoTitle) {
    if (confirm(`Remove "${videoTitle}" from My Stuff?`)) {
      try {
        let myStuff = JSON.parse(localStorage.getItem('myStuff') || '[]');
        
        // Filter out the video with the matching ID
        myStuff = myStuff.filter(video => video.id !== videoId);
        
        // Save back to localStorage
        localStorage.setItem('myStuff', JSON.stringify(myStuff));
        
        // Reload the display with force refresh
        loadMyStuff(true);
        
        // Dispatch custom event to update other My Stuff sections and video banners
        window.dispatchEvent(new CustomEvent('myStuffUpdated'));
        
        console.log(`Removed "${videoTitle}" from My Stuff`);
      } catch (error) {
        console.error('Error removing from My Stuff:', error);
        alert('Error removing video from My Stuff');
      }
    }
  }

  // Clear all My Stuff
  if (clearButton) {
    clearButton.addEventListener('click', function() {
      if (confirm('Are you sure you want to clear all videos from My Stuff?')) {
        localStorage.removeItem('myStuff');
        loadMyStuff(true);
        // Dispatch custom event to update other My Stuff sections
        window.dispatchEvent(new CustomEvent('myStuffUpdated'));
      }
    });
  }

  // Listen for storage changes (when videos are added from other sections)
  window.addEventListener('storage', function(e) {
    if (e.key === 'myStuff') {
      loadMyStuff(true);
    }
  });

  // Custom event listener for same-page updates
  window.addEventListener('myStuffUpdated', function() {
    loadMyStuff(true);
  });

  // Initial load
  loadMyStuff(true);

  // Refresh periodically but less frequently, and only if data has changed
  setInterval(() => loadMyStuff(false), 5000);
});
</script>

{% schema %}
{
  "name": "My Stuff",
  "tag": "section",
  "class": "section",
  "settings": [
    {
      "type": "header",
      "content": "General Settings"
    },
    {
      "type": "text",
      "id": "section_title",
      "label": "Section Title",
      "default": "My Stuff"
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background Color",
      "default": "#000000"
    },
    {
      "type": "range",
      "id": "section_padding_top",
      "min": 0,
      "max": 100,
      "step": 5,
      "unit": "px",
      "label": "Section Top Padding",
      "default": 40
    },
    {
      "type": "range",
      "id": "section_padding_bottom",
      "min": 0,
      "max": 100,
      "step": 5,
      "unit": "px",
      "label": "Section Bottom Padding",
      "default": 40
    },
    {
      "type": "range",
      "id": "container_padding",
      "min": 0,
      "max": 50,
      "step": 5,
      "unit": "px",
      "label": "Container Side Padding",
      "default": 20
    },
    {
      "type": "header",
      "content": "Title Settings"
    },
    {
      "type": "range",
      "id": "title_font_size",
      "min": 18,
      "max": 48,
      "step": 2,
      "unit": "px",
      "label": "Title Font Size",
      "default": 32
    },
    {
      "type": "select",
      "id": "title_font_weight",
      "options": [
        {
          "value": "400",
          "label": "Normal"
        },
        {
          "value": "500",
          "label": "Medium"
        },
        {
          "value": "600",
          "label": "Semi Bold"
        },
        {
          "value": "700",
          "label": "Bold"
        }
      ],
      "default": "600",
      "label": "Title Font Weight"
    },
    {
      "type": "color",
      "id": "title_color",
      "label": "Title Color",
      "default": "#FFFFFF"
    },
    {
      "type": "select",
      "id": "title_alignment",
      "options": [
        {
          "value": "left",
          "label": "Left"
        },
        {
          "value": "center",
          "label": "Center"
        },
        {
          "value": "right",
          "label": "Right"
        }
      ],
      "default": "left",
      "label": "Title Alignment"
    },
    {
      "type": "range",
      "id": "title_margin_bottom",
      "min": 10,
      "max": 50,
      "step": 5,
      "unit": "px",
      "label": "Title Bottom Margin",
      "default": 20
    },
    {
      "type": "header",
      "content": "Rail Settings"
    },
    {
      "type": "range",
      "id": "item_width",
      "min": 120,
      "max": 300,
      "step": 10,
      "unit": "px",
      "label": "Desktop Item Width",
      "default": 200
    },
    {
      "type": "range",
      "id": "mobile_item_width",
      "min": 80,
      "max": 200,
      "step": 10,
      "unit": "px",
      "label": "Mobile Item Width",
      "default": 140
    },
    {
      "type": "range",
      "id": "item_gap",
      "min": 5,
      "max": 30,
      "step": 5,
      "unit": "px",
      "label": "Gap Between Items",
      "default": 15
    },
    {
      "type": "range",
      "id": "rail_padding",
      "min": 0,
      "max": 30,
      "step": 5,
      "unit": "px",
      "label": "Rail Vertical Padding",
      "default": 10
    },
    {
      "type": "range",
      "id": "item_border_radius",
      "min": 0,
      "max": 20,
      "step": 2,
      "unit": "px",
      "label": "Item Border Radius",
      "default": 8
    },
    {
      "type": "header",
      "content": "Item Text Settings"
    },
    {
      "type": "range",
      "id": "item_title_size",
      "min": 12,
      "max": 20,
      "step": 1,
      "unit": "px",
      "label": "Item Title Font Size",
      "default": 14
    },
    {
      "type": "range",
      "id": "item_meta_size",
      "min": 10,
      "max": 16,
      "step": 1,
      "unit": "px",
      "label": "Item Meta Font Size",
      "default": 12
    },
    {
      "type": "header",
      "content": "Empty State Settings"
    },
    {
      "type": "text",
      "id": "empty_title",
      "label": "Empty State Title",
      "default": "Your collection is empty"
    },
    {
      "type": "textarea",
      "id": "empty_message",
      "label": "Empty State Message",
      "default": "Start adding videos to your collection by clicking the 'Add to My Stuff' button on videos you want to save."
    },
    {
      "type": "color",
      "id": "empty_text_color",
      "label": "Empty State Text Color",
      "default": "#FFFFFF"
    },
    {
      "type": "header",
      "content": "Controls"
    },
    {
      "type": "checkbox",
      "id": "show_clear_button",
      "default": true,
      "label": "Show Clear All Button"
    },
    {
      "type": "color",
      "id": "meta_text_color",
      "label": "Meta Text Color",
      "default": "#FFFFFF"
    }
  ],
  "presets": [
    {
      "name": "My Stuff"
    }
  ]
}
{% endschema %} 